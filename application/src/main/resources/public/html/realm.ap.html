<div class="pb-3 pt-3">
    <div class="row">
        <div class="col col-md-6 p-3">
            <h6><a ui-sref="realm.aps({realmId:ap.realm})">Attribute providers
                    &raquo;</a></h6>
        </div>
        <div class="col col-md-6 text-right">
            <button ng-if="!ap.enabled" class="btn btn-success btn-sm  text-right" ng-click="toggleProviderState(ap)">
                Enable
            </button>
            <button ng-if="ap.enabled" class="btn btn-warning btn-sm  text-right" ng-click="toggleProviderState(ap)">
                Disable
            </button>
            <button class="btn btn-primary btn-sm  text-right" ng-click="saveProvider(ap)"
                ng-disabled="ap.enabled">Save</button>
            <button class="btn btn-secondary btn-sm  text-right" ng-click="exportProvider(ap)">Export</button>
            <button class="btn btn-danger btn-sm  text-right" ng-click="deleteProviderDlg(ap)"
                ng-disabled="ap.enabled">Delete</button>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col-xs-1 p-2">
            <svg class="icon icon-xl icon-primary left" aria-hidden="true">
                <use xlink:href="{{providerIcon}}"></use>
            </svg>
        </div>
        <div class="col">
            <h3>{{providerName}}</h3>
            <p class="text-monospace">
                <span class="small text-monospace bg-light pl-1 pr-1">{{ap.authority}}:{{ap.provider}}</span>
                <button class="btn btn-xs btn-link p-0 pb-1" ng-click="copyText(ap.provider)">
                    <svg class="icon icon-xs icon-primary">
                        <use xlink:href="./italia/svg/sprite.svg#it-copy"></use>
                    </svg>
                </button>
            </p>
        </div>
    </div>
</div>

<div class="accordion" id="provider">

    <ul class="nav nav-tabs nav-fill">
        <li class="nav-item">
            <a class="nav-link {{activeView('overview')}}" href ng-click="switchView('overview')">Overview</a>
        </li>
        <li class="nav-item">
            <a class="nav-link  {{activeView('settings')}}" href ng-click="switchView('settings')">Settings</a>
        </li>
        <li class="nav-item">
            <a class="nav-link  {{activeView('attributesets')}}" href ng-click="switchView('attributesets')">Attribute
                Sets</a>
        </li>
        <li ng-if="ap.authority == 'internal'" class="nav-item">
            <a class="nav-link  {{activeView('conf.internal')}}" href ng-click="switchView('conf.internal')">Internal
                Configuration</a>
        </li>
        <li ng-if="ap.authority == 'mapper'" class="nav-item">
            <a class="nav-link  {{activeView('conf.mapper')}}" href ng-click="switchView('conf.mapper')">Mapper
                Configuration</a>
        </li>
        <li ng-if="ap.authority == 'script'" class="nav-item">
            <a class="nav-link  {{activeView('conf.script')}}" href ng-click="switchView('conf.script')">Script
                Configuration</a>
        </li>
        <li ng-if="ap.authority == 'webhook'" class="nav-item">
            <a class="nav-link  {{activeView('conf.webhook')}}" href ng-click="switchView('conf.webhook')">Webhook
                Configuration</a>
        </li>
        <li class="nav-item">
            <a class="nav-link  {{activeView('test')}}" href ng-click="switchView('test')">Test</a>
        </li>
    </ul>
    <div class="tab-content pt-3">
        <div class="tab-pane fade show active">
            <form role="form" name="providerForm" class="needs-validation was-validated" novalidate>
                <div ng-include="'./html/provider/ap.'+formView+'.html'"></div>
            </form>
        </div>
    </div>



</div>

<div class="modal popconfirm-modal" tabindex="-1" role="dialog" id="deleteProviderConfirm">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <p>Are you sure you want to delete?</p>
                <p class="text-danger">ATTENTION: This operation cannot be undone!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger btn-sm" ng-click="deleteProvider()" type="button">Delete</button>
                <button class="btn btn-outline-secondary btn-sm" type="button" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<div class="pt-3">

    <fieldset>
        <legend class="mb-4">Custom attribute mapping
            <small class="form-text">Provide a function to transform principal attributes during login. Return a
                valid
                map with all the attributes.<br>
                <p class="alert alert-warning">
                    Note: testing will use the current
                    authentication. It is advisable to
                    use the same provider to login and test.</p>
            </small>
        </legend>


        <div class="row">
            <div class="form-check form-check-inline col">
                <input id="idpAttributeMappingenabled" class="form-check-input" type="checkbox"
                    ng-model="attributeMapping.enabled" ng-change="toggleProviderAttributeMapping()">
                <label for="idpAttributeMappingenabled">Enable</label>
            </div>
        </div>
        <div class="container-fluid p-1">
            <div class="row mb-2">
                <div class="col text-right">
                    <button class="btn btn-secondary btn-sm text-right" ng-click="testProviderAttributeMapping()"
                        ng-disabled="!attributeMapping.enabled">Test</button>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-8">
                    <div ui-ace="aceOption" ng-model="attributeMapping.code"></div>
                </div>

                <div class="col" ng-if="attributeMapping.enabled">
                    <div ui-ace="aceOption" ng-model="attributeMapping.context" readonly></div>
                </div>
            </div>

            <div class="row">
                <div class="alert alert-danger" ng-if="attributeMapping.errors && attributeMapping.errors.length > 0">
                    <h6 class="alert-heading text-danger">Error</h6>
                    <div class="text-danger" ng-repeat="err in attributeMapping.errors">{{err}}</div>
                </div>

                <div ng-if="attributeMapping.result" class="col-md-12">
                    <figure class="neutral-2-bg p-2 mb-0">
                        <h6>Test results</h6>
                        <pre class="pre-scrollable">
<code class="language-json" data-lang="json">
{{attributeMapping.result | json:4}}
</code>
						</pre>
                    </figure>

                </div>

            </div>
        </div>

    </fieldset>


    <fieldset>
        <legend class="mb-4">Authorization function
            <small class="form-text">Provide a function to evaluate an authorization policy during the login flow.
                Return a <i>boolean true/false</i> to represent a decision.<br>
                <p class="alert alert-warning">
                    Note: testing will use the current
                    authentication. It is advisable to
                    use the same provider to login and test.</p>
            </small>
        </legend>


        <div class="row">
            <div class="form-check form-check-inline col">
                <input id="idpAuthFunctionenabled" class="form-check-input" type="checkbox"
                    ng-model="authFunction.enabled" ng-change="toggleProviderAuthFunction()">
                <label for="idpAuthFunctionenabled">Enable</label>
            </div>
        </div>
        <div class="container-fluid p-1">
            <div class="row mb-2">
                <div class="col text-right">
                    <button class="btn btn-secondary btn-sm text-right" ng-click="testProviderAuthFunction()"
                        ng-disabled="!authFunction.enabled">Test</button>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-8">
                    <div ui-ace="aceOption" ng-model="authFunction.code"></div>
                </div>

                <div class="col" ng-if="authFunction.enabled">
                    <div ui-ace="aceOption" ng-model="authFunction.context" readonly></div>
                </div>
            </div>

            <div class="row">
                <div class="alert alert-danger" ng-if="authFunction.errors && authFunction.errors.length > 0">
                    <h6 class="alert-heading text-danger">Error</h6>
                    <div class="text-danger" ng-repeat="err in authFunction.errors">{{err}}</div>
                </div>

                <div ng-if="authFunction.result" class="col-md-12">
                    <figure class="neutral-2-bg p-2 mb-0">
                        <h6>Test results</h6>
                        <pre class="pre-scrollable">
<code class="language-json" data-lang="json">
{{authFunction.result | json:4}}
</code>
						</pre>
                    </figure>

                </div>

            </div>
        </div>

    </fieldset>

</div>